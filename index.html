<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>اختبار القدرات اللفظي - النموذج السادس</title>
    <style>
        :root { --primary-color: #2c3e50; --secondary-color: #e67e22; --bg-color: #ecf0f1; --white: #ffffff; --correct-bg: #d4edda; --wrong-bg: #f8d7da; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: var(--bg-color); display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; padding: 20px; }
        .quiz-card { background: var(--white); width: 95%; max-width: 850px; padding: 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); border-top: 8px solid var(--primary-color); text-align: center; }
        .header-info { margin-bottom: 25px; border-bottom: 2px solid #bdc3c7; padding-bottom: 15px; }
        .challenger-badge { background: var(--secondary-color); color: white; padding: 8px 20px; border-radius: 30px; font-weight: bold; display: inline-block; margin-bottom: 20px; font-size: 1.2rem; box-shadow: 0 4px 15px rgba(230, 126, 34, 0.3); }
        input[type="text"] { width: 80%; padding: 12px; border: 2px solid #ddd; border-radius: 10px; font-size: 1.1rem; margin: 20px 0; outline: none; text-align: center; }
        .btn { background: var(--primary-color); color: white; padding: 12px 30px; border: none; border-radius: 10px; font-size: 1.1rem; cursor: pointer; transition: 0.3s; margin: 5px; }
        .btn:hover { background: #1a252f; }
        .timer-bar { height: 10px; background: #eee; border-radius: 5px; margin: 20px 0; overflow: hidden; }
        .timer-progress { height: 100%; background: #e74c3c; width: 100%; transition: width 1s linear; }
        .options-container { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 25px; }
        .option { padding: 15px; border: 2px solid #f1f2f6; border-radius: 12px; cursor: pointer; font-weight: 500; transition: 0.2s; text-align: center; }
        .correct-opt { background: #dff9fb !important; border-color: #2ecc71 !important; color: #27ae60; }
        .wrong-opt { background: #ffeaa7 !important; border-color: #e74c3c !important; color: #c0392b; }
        .feedback { margin-top: 20px; padding: 20px; border-radius: 12px; display: none; background: #f8f9fa; text-align: right; border-right: 5px solid var(--primary-color); line-height: 1.6; }
        .summary-item { padding: 15px; border-bottom: 1px solid #eee; margin-bottom: 10px; border-radius: 8px; text-align: right; }
        .summary-correct { background-color: var(--correct-bg); border-right: 5px solid #28a745; }
        .summary-wrong { background-color: var(--wrong-bg); border-right: 5px solid #dc3545; }
        .hidden { display: none; }
    </style>
</head>
<body>

<div class="quiz-card">
    <div class="header-info">
        <div style="font-weight: bold; color: var(--primary-color);">ثانوية الأمير عبدالمجيد</div>
        <div style="color: #7f8c8d;">أ / عبدالعزيز الفيفي</div>
        <h1>اختبار القدرات - النموذج السادس</h1>
    </div>

    <div id="start-page">
        <p>مرحباً بك في تحدي التناظر اللفظي (38 سؤالاً)</p>
        <input type="text" id="studentName" placeholder="اكتب اسمك هنا لبدء التحدي...">
        <br>
        <button class="btn" onclick="startQuiz()">ابدأ التحدي</button>
    </div>

   <div id="quiz-page" class="hidden">
        <div class="challenger-badge">المتحدي: <span id="display-name"></span></div>
        <div style="display: flex; justify-content: space-between;">
            <span style="color: #e74c3c;">الوقت: <b id="timer-text">45</b> ث</span>
        </div>
        <div class="timer-bar"><div id="timer-line" class="timer-progress"></div></div>
        <h2 id="question-text"></h2>
        <div class="options-container" id="options"></div>
        <div id="feedback" class="feedback"></div>
        <button id="next-btn" class="btn hidden" onclick="loadNextQuestion()" style="margin-top: 20px;">السؤال التالي</button>
    </div>

    <div id="result-page" class="hidden">
        <h2 id="score-text"></h2>
        <div id="quiz-summary"></div>
        <button class="btn" onclick="location.reload()">إعادة الاختبار</button>
    </div>
</div>

<script>
    const masterQuestions = [
        { q: "هيئة : صيحة", correct: "باء : رجع", a: ["باء : رجع", "طارف : تليد", "ضلالة : هدى", "يسر : عسر"], why: "العلاقة (ترادف): الهيئة هي الصيحة في بعض السياقات، وباء بمعنى رجع." },
        { q: "طارف : تليد", correct: "ضلالة : هدى", a: ["ضلالة : هدى", "يسر : عسر", "ناءى : اقترب", "أمان : وجل"], why: "العلاقة (تضاد): طارف (جديد) عكس تليد (قديم)، والضلالة عكس الهدى." },
        { q: "يسر : عسر", correct: "ناءى : اقترب", a: ["ناءى : اقترب", "إقدام : إحجام", "علم : جهل", "البراء : الولاء"], why: "العلاقة (تضاد): اليسر ضد العسر، والنأي (البعد) ضد الاقتراب." },
        { q: "إقدام : إحجام", correct: "علم : جهل", a: ["علم : جهل", "البراء : الولاء", "أمان : وجل", "طارف : تليد"], why: "العلاقة (تضاد): الإقدام عكس الإحجام، والعلم عكس الجهل." },
        { q: "البراء : الولاء", correct: "أمان : وجل", a: ["أمان : وجل", "يسر : عسر", "ضلالة : هدى", "ناءى : اقترب"], why: "العلاقة (تضاد): البراء والولاء ضدان، والأمان والوجل (الخوف) ضدان." },
        { q: "الكعبة : مكة", correct: "الأهرامات : مصر", a: ["الأهرامات : مصر", "برج إيفل : فرنسا", "القلب : الصدر", "القدس : فلسطين"], why: "العلاقة (مكان): الكعبة في مكة والأهرامات في مصر." },
        { q: "برج إيفل : فرنسا", correct: "القلب : الصدر", a: ["القلب : الصدر", "دجلة : العراق", "حج : مكة", "عين : وجه"], why: "العلاقة (مكان): برج إيفل في فرنسا والقلب في الصدر." },
        { q: "القدس : فلسطين", correct: "دجلة : العراق", a: ["دجلة : العراق", "حج : مكة", "عين : وجه", "الأهرامات : مصر"], why: "العلاقة (مكان): القدس في فلسطين ودجلة في العراق." },
        { q: "عين : وجه", correct: "حج : مكة", a: ["حج : مكة", "القلب : الصدر", "دجلة : العراق", "برج إيفل : فرنسا"], why: "العلاقة (مكان): العين في الوجه والحج في مكة." },
        { q: "عاشوراء : المحرم", correct: "الصوم : رمضان", a: ["الصوم : رمضان", "القمر : الليل", "الشمس : النهار", "الإمساك : الفجر"], why: "العلاقة (زمان): عاشوراء في شهر المحرم والصوم في شهر رمضان." },
        { q: "القمر : الليل", correct: "الشمس : النهار", a: ["الشمس : النهار", "الخضرة : الربيع", "عيد الفطر : شوال", "الإفطار : الغروب"], why: "العلاقة (زمان): القمر يظهر ليلاً والشمس تظهر نهاراً." },
        { q: "الإمساك : الفجر", correct: "الإفطار : الغروب", a: ["الإفطار : الغروب", "عيد الفطر : شوال", "الخضرة : الربيع", "الصوم : رمضان"], why: "العلاقة (زمان): الإمساك وقته الفجر والإفطار وقته الغروب." },
        { q: "الخضرة : الربيع", correct: "عيد الفطر : شوال", a: ["عيد الفطر : شوال", "الصوم : رمضان", "الشمس : النهار", "القمر : الليل"], why: "العلاقة (زمان): الخضرة في الربيع وعيد الفطر في شوال." },
        { q: "رضيع : فطيم", correct: "بلح : تمر", a: ["بلح : تمر", "دافئ : حار", "حصرم : عنب", "يرقة : حشرة"], why: "العلاقة (تدرج): الرضيع يصبح فطيماً والبلح يصبح تمراً." },
        { q: "دافئ : حار", correct: "حصرم : عنب", a: ["حصرم : عنب", "يرقة : حشرة", "سنة : نوم", "هلال : بدر"], why: "العلاقة (تدرج): الدافئ يشتد ليصبح حاراً والحصرم ينضج ليصبح عنباً." },
        { q: "يرقة : حشرة", correct: "سنة : نوم", a: ["سنة : نوم", "هلال : بدر", "هرولة : عدو", "رضيع : فطيم"], why: "العلاقة (تدرج): اليرقة تتحول لحشرة والسنة (نعاس) تسبق النوم." },
        { q: "هلال : بدر", correct: "هرولة : عدو", a: ["هرولة : عدو", "بلح : تمر", "دافئ : حار", "حصرم : عنب"], why: "العلاقة (تدرج): الهلال يكتمل بدراً والهرولة تزداد لتصبح عدواً." },
        { q: "معلم : تربية", correct: "طاهي : طباخة", a: ["طاهي : طباخة", "حائك : خياطة", "شرطي : حراسة", "فلاح : زراعة"], why: "العلاقة (وظيفة): المعلم وظيفته التربية والطاهي وظيفته الطباخة." },
        { q: "حائك : خياطة", correct: "شرطي : حراسة", a: ["شرطي : حراسة", "طاهي : طباخة", "معلم : تربية", "فلاح : زراعة"], why: "العلاقة (وظيفة): الحائك يقوم بالخياطة والشرطي يقوم بالحراسة." },
        { q: "أوفياء : وفي", correct: "أتقياء : تقي", a: ["أتقياء : تقي", "أشقياء : شقي", "أغبياء : غبي", "علماء : عالم"], why: "العلاقة (جمع ومفرده): أوفياء جمع وفي، وأتقياء جمع تقي." },
        { q: "أشقياء : شقي", correct: "أغبياء : غبي", a: ["أغبياء : غبي", "أتقياء : تقي", "أوفياء : وفي", "شجعان : شجاع"], why: "العلاقة (جمع ومفرده): أشقياء جمع شقي، وأغبياء جمع غبي." },
        { q: "مصر : أهرامات", correct: "مكة : كعبة", a: ["مكة : كعبة", "فرنسا : برج إيفل", "العراق : دجلة", "الصدر : قلب"], why: "العلاقة (المكان): الدولة والمعلم الذي بداخلها." },
        { q: "فرنسا : برج إيفل", correct: "فلسطين : قدس", a: ["فلسطين : قدس", "العراق : دجلة", "مكة : كعبة", "مصر : أهرامات"], why: "العلاقة (المكان): فرنسا تضم برج إيفل وفلسطين تضم القدس." },
        { q: "رمضان : صوم", correct: "المحرم : عاشوراء", a: ["المحرم : عاشوراء", "شوال : عيد الفطر", "الليل : قمر", "النهار : شمس"], why: "العلاقة (زمان): رمضان زمن الصوم والمحرم زمن عاشوراء." },
        { q: "شوال : عيد الفطر", correct: "الربيع : خضرة", a: ["الربيع : خضرة", "الليل : قمر", "الغروب : إفطار", "الفجر : إمساك"], why: "العلاقة (زمان): شوال شهر العيد والربيع فصل الخضرة." },
        { q: "تمر : بلح", correct: "عنب : حصرم", a: ["عنب : حصرم", "حار : دافئ", "بدر : هلال", "نوم : سنة"], why: "العلاقة (تدرج عكسي): التمر كان بلحاً والعنب كان حصرماً." },
        { q: "حشرة : يرقة", correct: "بدر : هلال", a: ["بدر : هلال", "تمر : بلح", "حار : دافئ", "عدو : هرولة"], why: "العلاقة (مراحل): الحشرة كانت يرقة والبدر كان هلالاً." },
        { q: "خياطة : حائك", correct: "حراسة : شرطي", a: ["حراسة : شرطي", "تربية : معلم", "طباخة : طاهي", "طب : طبيب"], why: "العلاقة (المهنة وصاحبها): الخياطة عمل الحائك والحراسة عمل الشرطي." },
        { q: "تربية : معلم", correct: "طباخة : طاهي", a: ["طباخة : طاهي", "خياطة : حائك", "حراسة : شرطي", "بناء : مهندس"], why: "العلاقة (المهنة وصاحبها): التربية وظيفة المعلم والطباخة وظيفة الطاهي." },
        { q: "عسر : يسر", correct: "اقترب : ناءى", a: ["اقترب : ناءى", "جهل : علم", "هدى : ضلالة", "وجل : أمان"], why: "العلاقة (تضاد): العسر عكس اليسر والاقتراب عكس النأي." },
        { q: "جهل : علم", correct: "إحجام : إقدام", a: ["إحجام : إقدام", "الولاء : البراء", "وجل : أمان", "تليد : طارف"], why: "العلاقة (تضاد): الجهل عكس العلم والإحجام عكس الإقدام." },
        { q: "الولاء : البراء", correct: "هدى : ضلالة", a: ["هدى : ضلالة", "عسر : يسر", "اقترب : ناءى", "وجل : أمان"], why: "العلاقة (تضاد): الولاء ضد البراء والهدى ضد الضلالة." },
        { q: "وجل : أمان", correct: "تليد : طارف", a: ["تليد : طارف", "إحجام : إقدام", "جهل : علم", "عسر : يسر"], why: "العلاقة (تضاد): الوجل ضد الأمان والتليد ضد الطارف." },
        { q: "الصدر : قلب", correct: "الوجه : عين", a: ["الوجه : عين", "مصر : أهرامات", "فرنسا : برج إيفل", "العراق : دجلة"], why: "العلاقة (مكان): الصدر يضم القلب والوجه يضم العين." },
        { q: "العراق : دجلة", correct: "فلسطين : قدس", a: ["فلسطين : قدس", "مكة : كعبة", "مصر : أهرامات", "الصدر : قلب"], why: "العلاقة (مكان): العراق فيه دجلة وفلسطين فيها القدس." },
        { q: "الليل : قمر", correct: "النهار : شمس", a: ["النهار : شمس", "الربيع : خضرة", "شوال : عيد الفطر", "رمضان : صوم"], why: "العلاقة (زمان): القمر يظهر ليلاً والشمس تظهر نهاراً." },
        { q: "الغروب : إفطار", correct: "الفجر : إمساك", a: ["الفجر : إمساك", "رمضان : صوم", "المحرم : عاشوراء", "شوال : عيد الفطر"], why: "العلاقة (زمان): الغروب موعد الإفطار والفجر موعد الإمساك." },
        { q: "عدو : هرولة", correct: "نوم : سنة", a: ["نوم : سنة", "تمر : بلح", "عنب : حصرم", "حار : دافئ"], why: "العلاقة (تدرج): العدو مرحلة بعد الهرولة، والنوم مرحلة بعد السنة." }
    ];

    let questions = []; let currentQ = 0; let score = 0; let timer; let timeLeft = 45; let userAnswers = [];

    function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    function startQuiz() {
        const nameInput = document.getElementById('studentName');
        const name = nameInput.value.trim();
        if(!name) { alert("من فضلك اكتب اسمك"); return; }
        document.getElementById('display-name').innerText = name;
        questions = shuffle([...masterQuestions]);
        document.getElementById('start-page').classList.add('hidden');
        document.getElementById('quiz-page').classList.remove('hidden');
        loadQuestion();
    }

    function loadQuestion() {
        if(currentQ >= questions.length) { finishQuiz(); return; }
        const qData = questions[currentQ];
        const shuffledOptions = shuffle([...qData.a]);
        document.getElementById('q-num').innerText = currentQ + 1;
        document.getElementById('question-text').innerText = qData.q;
        document.getElementById('feedback').style.display = 'none';
        document.getElementById('next-btn').classList.add('hidden');
        const optDiv = document.getElementById('options');
        optDiv.innerHTML = '';
        shuffledOptions.forEach(opt => {
            const d = document.createElement('div');
            d.className = 'option'; d.innerText = opt;
            d.onclick = () => checkAnswer(opt, d);
            optDiv.appendChild(d);
        });
        startTimer();
    }

    function startTimer() {
        clearInterval(timer); timeLeft = 45;
        const line = document.getElementById('timer-line');
        const txt = document.getElementById('timer-text');
        timer = setInterval(() => {
            timeLeft--; txt.innerText = timeLeft;
            line.style.width = (timeLeft/45)*100 + '%';
            if(timeLeft <= 0) { clearInterval(timer); checkAnswer(null, null); }
        }, 1000);
    }

    function checkAnswer(sel, el) {
        clearInterval(timer);
        const qData = questions[currentQ];
        const isCorrect = (sel === qData.correct);
        userAnswers.push({ q: qData.q, sel: sel || "تجاوز الوقت", cor: qData.correct, isCorrect, why: qData.why });
        document.querySelectorAll('.option').forEach(o => o.onclick = null);
        if(isCorrect) { score++; if(el) el.classList.add('correct-opt'); } 
        else { if(el) el.classList.add('wrong-opt'); document.querySelectorAll('.option').forEach(o => { if(o.innerText === qData.correct) o.classList.add('correct-opt'); }); }
        const f = document.getElementById('feedback');
        f.innerHTML = `<strong>${isCorrect ? '✅ رائع' : '❌ خطأ'}</strong><br>${qData.why}`;
        f.style.display = 'block';
        document.getElementById('next-btn').classList.remove('hidden');
    }

    function loadNextQuestion() { currentQ++; loadQuestion(); }

    function finishQuiz() {
        document.getElementById('quiz-page').classList.add('hidden');
        document.getElementById('result-page').classList.remove('hidden');
        const name = document.getElementById('studentName').value;
        document.getElementById('score-text').innerHTML = `المتحدي: ${name}<br>النتيجة: ${score} من ${questions.length}`;
        const sum = document.getElementById('quiz-summary');
        userAnswers.forEach((ans, i) => {
            const d = document.createElement('div');
            d.className = `summary-item ${ans.isCorrect ? 'summary-correct' : 'summary-wrong'}`;
            d.innerHTML = `<b>س${i+1}: ${ans.q}</b><br>إجابتك: ${ans.sel} | الصحيحة: ${ans.cor}<br><small>${ans.why}</small>`;
            sum.appendChild(d);
        });
    }
</script>
</body>
</html>